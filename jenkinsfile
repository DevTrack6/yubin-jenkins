pipeline {
    agent any
    stages {
        stage('hello') {
            parallel {
                stage("hello1") {
                    steps {
                        sh 'echo "hello1"'
                        sh 'ls -al'
                    }
                }
                stage("hello2") {
                    steps {
                        sh 'echo "hello2"'
                        sh 'ls -al'
                    }
                }
            }
        }
        stage("test") {
            steps {
                sh 'echo "test"'
                sh 'ls -al'
                sh 'exit 1'
            }
        }
    }
    post{
        success{
            emailext body: '$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS:\n\nCheck console output at $BUILD_URL to view the results.',
                     subject: '$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!',
                     to: 'munu220@naver.com'
            discordSend title: "$JOB_NAME - Build # $BUILD_NUMBER - ${currentBuild.currentResult}!",
                        footer: "Footer Text",
                        link: "$BUILD_URL",
                        description: "$JOB_NAME - Build # $BUILD_NUMBER - ${currentBuild.currentResult}!",
                        result: "${currentBuild.currentResult}",
                        webhookURL: "https://discord.com/api/webhooks/1140308683058856056/oPhCM7KlWKNeHVeELupNKMFMmtXpiOkmyGxxWjoRPX6l7zLlryOyY3OBNZgcbw8O-R0D"
        }
        failure{
            emailext body: '$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS:\n\nCheck console output at $BUILD_URL to view the results.',
                     subject: '$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!',
                     to: 'munu220@naver.com'
            discordSend title: "$JOB_NAME - Build # $BUILD_NUMBER - ${currentBuild.currentResult}!",
                footer: "Footer Text",
                link: "$BUILD_URL",
                description: "$JOB_NAME - Build # $BUILD_NUMBER - ${currentBuild.currentResult}!",
                result: "${currentBuild.currentResult}",
                webhookURL: "https://discord.com/api/webhooks/1140308683058856056/oPhCM7KlWKNeHVeELupNKMFMmtXpiOkmyGxxWjoRPX6l7zLlryOyY3OBNZgcbw8O-R0D"
        }
    }
}
